<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link href="bootstrap.min.css" rel="stylesheet"  type="text/css"/>
        <link href="components.css" rel="stylesheet"  type="text/css"/>
        <link href="login.css" rel="stylesheet"  type="text/css"/>
       
        <!-- Correctly referencing the jQuery library -->
        <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($) {
                $("#register").on("click", function(){
                    window.location.href="register.html";
                });
                $("#login").on("click", function(event) {

                    var telephone = $("#telephone").val();
                    var password =$("#password").val();

                    if (telephone == null || telephone == "") {
                        alert("Phone number cannot be empty");
                        return false;
                    }
                    if (password == null || password == "") {
                        alert("password cannot be empty");
                        return false;
                    }

                    $.ajax({
                        type: "POST",
                        contentType: "application/x-www-form-urlencoded",
                        url: "http://localhost:8080/user/login",
                        data: {
                            "telephone": telephone,
                            "password":password,
                        },
                        xhrFields:{withCredentials:true},
                        success: function(data) {
                            if (data.status == "success") {
                                alert("login success");
                            } else {
                                alert("login failed, because: " + data.data.errMsg);
                            }
                        },
                        error: function(data) {
                            alert("login failed, because: " + data.responseText);
                        }
                    });
                });
            });
        </script>
    </head>
    <body class="login">
        <div class="content">
            <h3 class="form-title">User Login</h3>
            <div class="form-group">
                <label class="control-label">Phone Number</label>
                <div>
                    <input class="form-control" type="text" placeholder="Phone number" name="telephone" id="telephone" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label">Password</label>
                <div>
                    <input class="form-control" type="text" placeholder="Password" name="password" id="password" />
                </div>
            </div>
            <div class="form-action">
                <button class="btn blue" id="login" type="submit">
                    Login
                </button>
                <button class="btn green" id="register" type="submit">
                    Register
                </button>
            </div>
        </div>
    </body>
</html>
