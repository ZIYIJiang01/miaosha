<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link href="bootstrap.min.css" rel="stylesheet"  type="text/css"/>
        <link href="components.css" rel="stylesheet"  type="text/css"/>
        <link href="login.css" rel="stylesheet"  type="text/css"/>
        <script src="./gethost.js" type="text/javascript"></script>
        <!-- Correctly referencing the jQuery library -->
        <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($) {
                $("#getotp").on("click", function(event) {

                    var telephone = $("#telephone").val();
                    if (telephone == null || telephone == "") {
                        alert("Phone number cannot be empty");
                        return false;
                    }
                    $.ajax({
                        type: "POST",
                        contentType: "application/x-www-form-urlencoded",
                        url: "http://"+g_host+"/user/getotp",
                        data: {
                            "telephone": telephone
                        },
                        success: function(data) {
                            if (data.status == "success") {
                                alert("OTP has been sent to your phone, please check.");
                                window.location.href="register.html";
                            } else {
                                alert("OTP sending failed, because: " + data.data.errMsg);
                            }
                        },
                        error: function(data) {
                            alert("OTP sending failed, because: " + data.responseText);
                        }
                    });
                });
            });
        </script>
    </head>
    <body class="login">
        <div class="content">
            <h3 class="form-title">Get OTP Information</h3>
            <div class="form-group">
                <label class="control-label">Phone Number</label>
                <div>
                    <input class="form-control" type="text" placeholder="Phone number" id="telephone" />
                </div>
            </div>
            <div class="form-action">
                <button class="btn blue" id="getotp" type="submit">
                    Get OTP Message
                </button>
            </div>
        </div>
    </body>
</html>
